params {
    reads_dir       = "$baseDir/data/NGS"
    results_dir     = "$baseDir/results"
    illumina_suffix = '_illumina'
    nanopore_suffix = '_ont'
    fhir_validator     = "$baseDir/tools/fhir-validator.jar"
    clinical_metadata  = "$baseDir/data/clinical_metadata.csv"
    cgmlst_schema      = "$baseDir/data/cgmlst_schema"
    nanopore_min_q = 10
    nanopore_min_l = 500
    version         = "1.3.0"

}

process {
    withName: fastp {
        cpus = 4
        memory = '6 GB'
    }
    
    withName: megahit {
        cpus = 4
        memory = '8 GB' 
    }
    
    withName: chopper {
    cpus = 4
    memory = '6 GB'
    }
    
    withName: flye {
        cpus = 8
        memory = '10 GB'
    }
    
    withName: CHEWBBACA {
        cpus = 8
        memory = '8 GB'
    }
    
    withName: medaka_polish {
        cpus = 8
        memory = '10 GB'
    }

    withName: pilon_polish {
        cpus = 4
        memory = '8 GB' 
    }
    
    withName: fastqc {
        cpus = 4
        memory = '8 GB'
    }

    withName: MULTIQC {
        cpus = 4
        memory = '8 GB'
    }

    withName: CREATE_FHIR {
        cpus = 4
        memory = '8 GB'
    }
    
    withName: VALIDATE_FHIR {
        cpus = 4
        memory = '4 GB'
    }

    withName: kleborate {
        cpus = 4
        memory = '8 GB'
    }

    scratch = true
}

profiles {
    standard {
        process.executor = 'local'
    }
    
    hpc {
        process.executor = 'slurm'
        process.queue = 'normal'
    }
    
    test {
        params.reads_dir = 'test_data'
        params.max_threads = 2
    }
}

report {
    enabled = true
    file = "$baseDir/results/runningstat/execution.html"
    overwrite = true
}

timeline {
    enabled = true
    file = "$baseDir/results/runningstat/timeline.html"
    overwrite = true
}

dag {
    enabled = true
    file = "$baseDir/results/runningstat/dag.html"
    overwrite = true
}